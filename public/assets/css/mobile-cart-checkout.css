/* ============================================================
   CART & CHECKOUT PAGE MOBILE OPTIMIZATION
   ============================================================ */

/* Cart page mobile */
@media (max-width: 767px) {
  .cart-container {
    display: flex;
    /* Changed from grid to flex column for better control */
    flex-direction: column;
    gap: 12px;
  }

  .cart-items-section {
    order: 1;
    /* Items first */
  }

  .cart-summary-section {
    order: 2;
    /* Suggestions/Summary last */
    position: static;
    /* Remove top sticky */
    z-index: 10;
    margin-bottom: 20px;
  }

  /* Hide the desktop summary box on mobile since we have the sticky footer */
  .order-summary-container {
    display: none !important;
  }

  .cart-item {
    display: grid;
    grid-template-columns: 80px 1fr;
    gap: 12px;
    padding: 12px !important;
    border-radius: 12px;
    border: none;
    background: white;
    margin-bottom: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    /* Soft shadow like Shopee */
  }

  /* Bootstrap Grid Override for Mobile Cart Item */
  .cart-item>.row {
    display: flex !important;
    margin: 0 !important;
    align-items: center;
    /* Center items vertically */
    gap: 10px;
  }

  /* 1. Checkbox Column (Order 1) */
  .cart-item .col-3:first-child {
    order: 1;
    width: 30px !important;
    flex: 0 0 30px !important;
    display: flex !important;
    align-items: center;
    justify-content: center;
    padding: 0 !important;
    margin: 0 !important;
  }

  /* Checkbox Scale */
  .form-check {
    margin: 0 !important;
    padding: 0 !important;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .form-check-input {
    margin: 0 !important;
    width: 20px !important;
    height: 20px !important;
    position: static !important;
    /* Disable bootstrap absolute positioning */
  }



  /* 2. Image Column (Order 2) */
  .cart-item .col-3:nth-child(1) {
    /* This selector targeted the wrapper, now we target the image container wrapper if it was separate, but in HTML they are in the same div. We need to split them in HTML or handle the current structure. 
     Wait, the HTML structure is: 
     <div class="col-md-2 col-3 ...">
        <div class="form-check">...</div>
        <a href="#" class="product-img-container">...</a>
     </div>
     
     The current HTML puts checkbox AND image in the SAME .col-3. 
     We need to split them or style the .col-3 to be a flex row itself! 
  */
  }

  /* Let's style the wrapper .col-3 to be a flex row of Checkbox + Image */
  .cart-item .col-md-2.col-3 {
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    gap: 10px !important;
    width: auto !important;
    padding: 0 !important;
    max-width: none !important;
  }

  /* Force Image Size */
  .product-img-container {
    width: 80px !important;
    height: 80px !important;
    display: block;
    border-radius: 8px;
    overflow: hidden;
    background: #f8f9fa;
    border: 1px solid #eee;
    flex-shrink: 0;
  }

  .product-img-container img {
    width: 100%;
    height: 100%;
    object-fit: contain;
  }

  /* 3. Content Column (Order 3) */
  .cart-item .col-md-8.col-9 {
    flex: 1 !important;
    padding: 0 0 0 8px !important;
    min-width: 0;
    /* Enable truncation */
  }

  /* Layout: Title Top, Price Bottom */
  .cart-item .col-md-8.col-9 .d-flex.justify-content-between {
    display: flex !important;
    flex-direction: column !important;
    height: 100%;
    justify-content: space-between !important;
  }

  /* Title */
  .cart-item-title,
  .cart-item .col-md-8.col-9 h5 a {
    white-space: normal;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    font-size: 14px;
    line-height: 1.3;
    margin-bottom: 4px;
    color: #333;
    font-weight: 500;
  }

  /* Price */
  .d-md-none.fw-bold.fs-5 {
    display: block !important;
    color: #d0021b !important;
    font-size: 15px !important;
    margin-top: auto;
    /* Push to bottom */
  }

  /* Quantity & Delete Row */
  .d-flex.align-items-center.flex-wrap.gap-2.mt-2 {
    margin-top: 8px !important;
    display: flex !important;
    justify-content: space-between;
    align-items: center;
    width: 100%;
  }

  .amazon-qty-select {
    margin: 0 !important;
    height: 28px;
  }

  /* Delete Icon Button */
  .btn-remove {
    position: static !important;
    /* Reset absolute */
    float: none !important;
    margin: 0 !important;
    color: #999;
    background: transparent !important;
    padding: 6px !important;
    font-size: 16px !important;
    /* Icon size */
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* ========= CHAT WIDGET OVERRIDE FOR CART PAGE ========= */
  /* This works because we are on a page that loads this CSS */
  #chat-trigger {
    bottom: 140px !important;
    /* Lift above the ~120px footer/spacer */
  }
}

/* Cart Summary sticky at bottom */
.cart-summary {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  padding: 12px;
}

.summary-row {
  display: contents;
}

.summary-label {
  font-size: 12px;
  color: #6b7280;
  grid-column: 1;
}

.summary-value {
  font-size: 12px;
  text-align: right;
  grid-column: 2;
  color: #1f2937;
}

.summary-total-label {
  font-size: 13px;
  font-weight: 700;
  grid-column: 1;
  color: #1f2937;
}

.summary-total-value {
  font-size: 14px;
  font-weight: 700;
  text-align: right;
  grid-column: 2;
  color: #ef4444;
}

.checkout-button {
  grid-column: 1 / -1;
  width: 100% !important;
  height: 48px !important;
  padding: 0 16px !important;
  margin-top: 8px;
  font-size: 14px;
  border-radius: 10px;
}

.continue-shopping {
  grid-column: 1 / -1;
  width: 100% !important;
  height: 44px !important;
  padding: 0 12px !important;
  font-size: 13px;
  border-radius: 8px;
}


/* Checkout page mobile */
@media (max-width: 767px) {
  .checkout-container {
    display: grid;
    grid-template-columns: 1fr;
    gap: 16px;
  }

  .checkout-form-section {
    order: 1;
  }

  .order-review-section {
    order: 2;
    background: #f8fafc;
    padding: 12px;
    border-radius: 10px;
  }

  .form-section {
    padding: 12px;
    border: 1px solid #e5e7eb;
    border-radius: 10px;
    margin-bottom: 12px;
    background: white;
  }

  .form-section-title {
    font-size: 15px;
    font-weight: 700;
    margin-bottom: 12px;
    padding-bottom: 8px;
    border-bottom: 2px solid #3b82f6;
    color: #1f2937;
  }

  .form-group {
    margin-bottom: 12px;
  }

  .form-group label {
    font-size: 13px;
    font-weight: 600;
    margin-bottom: 6px;
    display: block;
    color: #374151;
  }

  .form-group input,
  .form-group select,
  .form-group textarea {
    width: 100% !important;
    min-height: 44px !important;
    padding: 10px 12px !important;
    font-size: 14px !important;
    border-radius: 8px !important;
    border: 1px solid #e5e7eb !important;
    background: white !important;
    color: #1f2937 !important;
  }

  .form-group textarea {
    min-height: 80px !important;
    resize: vertical;
  }

  .form-check {
    padding: 10px 0;
  }

  .form-check-input {
    width: 20px;
    height: 20px;
    cursor: pointer;
    accent-color: #3b82f6;
  }

  .form-check-label {
    font-size: 13px;
    margin-left: 8px;
    cursor: pointer;
  }

  /* Order review mobile */
  .order-items-preview {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .order-item-preview {
    display: flex;
    gap: 8px;
    padding: 8px;
    background: white;
    border-radius: 8px;
    border: 1px solid #e5e7eb;
  }

  .order-item-preview-image {
    width: 60px;
    height: 60px;
    border-radius: 6px;
    overflow: hidden;
    flex-shrink: 0;
  }

  .order-item-preview-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .order-item-preview-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 2px;
    justify-content: center;
  }

  .order-item-preview-name {
    font-size: 12px;
    font-weight: 600;
    color: #1f2937;
  }

  .order-item-preview-price {
    font-size: 12px;
    color: #ef4444;
    font-weight: 600;
  }

  .order-item-preview-quantity {
    font-size: 11px;
    color: #6b7280;
  }

  /* Payment methods mobile */
  .payment-methods {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .payment-method-option {
    padding: 12px;
    border: 2px solid #e5e7eb;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 10px;
    background: white;
  }

  .payment-method-option input[type="radio"] {
    width: 20px;
    height: 20px;
    cursor: pointer;
    accent-color: #3b82f6;
  }

  .payment-method-option:has(input:checked) {
    border-color: #3b82f6;
    background: rgba(59, 130, 246, 0.05);
  }

  .payment-method-label {
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    flex: 1;
  }

  .payment-method-icon {
    font-size: 16px;
    color: #3b82f6;
  }

  /* Buttons mobile */
  .btn-checkout-submit {
    width: 100% !important;
    height: 48px !important;
    padding: 0 16px !important;
    font-size: 14px !important;
    font-weight: 600 !important;
    border-radius: 10px !important;
    margin-top: 12px;
  }

  .btn-back {
    width: 100% !important;
    height: 44px !important;
    padding: 0 12px !important;
    font-size: 13px !important;
    border-radius: 8px !important;
    margin-bottom: 8px;
  }
}

/* Tablet cart/checkout */
@media (min-width: 768px) and (max-width: 1023px) {

  .cart-container,
  .checkout-container {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 16px;
  }

  .cart-items-section,
  .checkout-form-section {
    grid-column: 1;
  }

  .cart-summary-section,
  .order-review-section {
    grid-column: 2;
    position: sticky;
    top: 80px;
    height: fit-content;
  }

  .cart-item {
    display: grid;
    grid-template-columns: 120px 1fr;
    gap: 12px;
    padding: 14px;
  }
}

/* Landscape mode cart */
@media (max-height: 600px) and (orientation: landscape) {
  .cart-summary-section {
    position: static;
    margin-bottom: 16px;
  }

  .cart-item {
    grid-template-columns: 80px 1fr;
    gap: 8px;
    padding: 8px;
    margin-bottom: 8px;
  }

  .cart-item-title {
    font-size: 12px;
  }
}

/* Empty cart state */
@media (max-width: 767px) {
  .empty-cart-message {
    text-align: center;
    padding: 40px 20px;
    background: #f8fafc;
    border-radius: 10px;
  }

  .empty-cart-message i {
    font-size: 48px;
    color: #cbd5e1;
    margin-bottom: 12px;
  }

  .empty-cart-message h2 {
    font-size: 18px;
    margin-bottom: 8px;
  }

  .empty-cart-message p {
    font-size: 13px;
    color: #6b7280;
  }

  .btn-continue-shopping {
    width: 100%;
    margin-top: 16px;
  }
}

/* Success/Error messages mobile */
@media (max-width: 767px) {
  .alert {
    padding: 12px !important;
    margin: 12px 0 !important;
    font-size: 13px !important;
    border-radius: 8px !important;
  }

  .alert-heading {
    font-size: 13px !important;
    font-weight: 600 !important;
    margin-bottom: 4px !important;
  }
}